{"finn.no":{"link":"^finn\\.no\\/.*ad\\.html","res":":\nlet results = [];\nconst parser = new DOMParser();\nconst html = parser.parseFromString($._, \"text/html\");\n\nlet mapItem;\n\nconst map = html.querySelector(\n  'img[src^=\"https://maptiles.finncdn.no/staticmap\"]'\n);\nif (map) {\n  mapItem = ([map.src, \"Map\"]);\n} else {\n  const mapLink = html.querySelector('[data-testid=\"map-link\"]');\n  if (mapLink) {\n    let u = mapLink.href;\n    u = `https://maptiles.finncdn.no/staticmap?lat=${\n      u.match(/lat=([-0-9.]+)/)[1]\n    }&lng=${\n      u.match(/lng=([-0-9.]+)/)[1]\n    }&zoom=12&size=800x400&maptype=norwayVector&showPin=true`;\n    mapItem = ([u, \"Map\"]);\n  }\n}\n\nlet imgs = html.querySelectorAll(\"div[data-carousel-container]>a\");\nif (imgs.length) {\n  for (const img of imgs) {\n    const srcset =\n      img.firstElementChild.srcset || img.firstElementChild.dataset.srcset;\n    const src = srcset.split(\",\")[0].split(\" \")[0];\n    results.push([src, img.innerText]);\n  }\n}\n\nimgs = html.querySelectorAll('[alt=\"Galleribilde\"]');\nfor (const img of imgs) {\n  const srcset = img.srcset || img.dataset.srcset;\n  const src = srcset.split(\",\")[0].split(\" \")[0];\n  results.push([src, img.innerText]);\n}\n\nif (mapItem){\nresults.push(mapItem);\n}\n\nreturn results;\n"}}
